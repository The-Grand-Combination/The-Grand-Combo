## Dom Pedro II and early troubles, by Wyrm, may 2023
	#Sends and event to JAN to decide which year is it
	country_event = {
		id = 8001
		title = "DOMPEDROCORONATIONCHECK"
		desc = "DOMPEDROCORONATIONCHECK"

		allow_multiple_instances = no

		trigger = { tag = JAN 
					has_global_flag = majority_coup_ongoing    
					has_global_flag = majority_coup_ongoing2 }

		mean_time_to_happen = { days = 1 
								modifier = { exists = yes factor = 0.1 }
		}

		immediate = { clr_global_flag = majority_coup_ongoing }

		option = {
			name = "SENDEVENTTOBRAZIL"
			any_country = { limit = { tag = BRZ NOT = { year = 1840 } } country_event = 8002 }
			any_country = { limit = { tag = BRZ year = 1840 NOT = { year = 1844 } } country_event = 8004 }
		}
	}

	#Asks for the coup while pedro is too young
	country_event = {
		id = 8002
		title = "EVTNAME8002"
		desc = "EVTDESC8002"
		picture = "young_dom_pedro"

		trigger = { tag = BRZ ai = yes NOT = { year = 1840 } } #This is normally a triggered event, but it will trigger for the AI once so it has a chance to pick it

		mean_time_to_happen = { years = 4 }

		fire_only_once = yes

		option = {
			name = "EVTOPTA8002"
			country_event = { id = 8003 days = 30 }
			ai_chance = { factor = 20 }
		}

		option = {
			name = "EVTOPTB8002"
			clr_global_flag = majority_coup_ongoing2
			ai_chance = { factor = 80 }
		}
		
	}

	#Dom Pedro II coronation pre 14yo
	country_event = {
		id = 8003
		title = "EVTNAME8003"
		desc = "EVTDESC8003"
		picture = "dom_pedro_coronation_child"

		is_triggered_only = yes

		# Long live!
		option = {
			name = "EVTOPTA8003"
			prestige = 5
			plurality = 1
			any_pop = { militancy = -1 consciousness = 1 }
			set_country_flag = pedro_ii_crowned
			set_country_flag = child_emperor

			remove_country_modifier = national_confusion
			remove_country_modifier = expert_diplomat
			remove_country_modifier = successful_industrialist
			remove_country_modifier = ivory_tower_intellectual
			remove_country_modifier = man_of_the_people
			remove_country_modifier = landed_gentleman
			remove_country_modifier = military_man
			remove_country_modifier = lord_admiral
			remove_country_modifier = raving_loon
			remove_country_modifier = luddite
			remove_country_modifier = great_statesman
			remove_country_modifier = backroom_boy
			remove_country_modifier = great_reformer
			remove_country_modifier = gauche_buffoon
			remove_country_modifier = administrative_genius
			remove_country_modifier = visionary_thinker
			remove_country_modifier = competent_placeholder
			remove_country_modifier = imperious_autocrat
			remove_country_modifier = prince_of_terror
			remove_country_modifier = efficient_sociopath
			remove_country_modifier = pig_headed_isolationist
			remove_country_modifier = ambitious_union_boss
			remove_country_modifier = dour_economist
			remove_country_modifier = has_political_leader
		}
	}

	#Asks for the coup while as historical
	country_event = {
		id = 8004
		title = "EVTNAME8002"
		desc = "EVTDESC8004"
		picture = "teen_dom_pedro"

		trigger = { tag = BRZ
					NOT = { has_country_flag = pedro_ii_crowned }
					has_country_modifier = regency_modifier
					year = 1840
		}

		mean_time_to_happen = { days = 1 }

		fire_only_once = yes

		option = {
			name = "EVTOPTA8004" 
			clr_global_flag = majority_coup_ongoing2
			ai_chance = { factor = 20 }
		}

		option = {
			name = "EVTOPTB8004"
			country_event = { id = 8005 days = 30 }
			ai_chance = { factor = 80 }
		}
	}

	#Dom Pedro II historical coronation
	country_event = {
		id = 8005
		title = "EVTNAME8003"
		desc = "EVTDESC8005"
		picture = "dom_pedro_coronation_historical"

		is_triggered_only = yes

		# Long live!
		option = {
			name = "EVTOPTA8003"

			prestige = 10
			plurality = 3
			any_pop = { militancy = -1 consciousness = 1 }
			add_country_modifier = { name = dom_pedro_ii duration = -1 }
			remove_country_modifier = regency_modifier
			set_country_flag = pedro_ii_crowned
			
			remove_country_modifier = national_confusion
			remove_country_modifier = expert_diplomat
			remove_country_modifier = successful_industrialist
			remove_country_modifier = ivory_tower_intellectual
			remove_country_modifier = man_of_the_people
			remove_country_modifier = landed_gentleman
			remove_country_modifier = military_man
			remove_country_modifier = lord_admiral
			remove_country_modifier = raving_loon
			remove_country_modifier = luddite
			remove_country_modifier = great_statesman
			remove_country_modifier = backroom_boy
			remove_country_modifier = great_reformer
			remove_country_modifier = gauche_buffoon
			remove_country_modifier = administrative_genius
			remove_country_modifier = visionary_thinker
			remove_country_modifier = competent_placeholder
			remove_country_modifier = imperious_autocrat
			remove_country_modifier = prince_of_terror
			remove_country_modifier = efficient_sociopath
			remove_country_modifier = pig_headed_isolationist
			remove_country_modifier = ambitious_union_boss
			remove_country_modifier = dour_economist
			remove_country_modifier = has_political_leader
		}
	}

	#Dom Pedro II 18yo coronation
	country_event = {
		id = 8006
		title = "EVTNAME8003"
		desc = "EVTDESC8006"
		picture = "dom_pedro_coronation_older"

		trigger = { tag = BRZ 
					has_country_modifier = regency_modifier
					year = 1844
		}

		mean_time_to_happen = { months = 1 }

		fire_only_once = yes

		# Long live!
		option = {
			name = "EVTOPTA8003"
			prestige = 15
			any_pop = { militancy = -3 consciousness = 1 }
			plurality = 6
			set_country_flag = pedro_ii_crowned
			remove_country_modifier = regency_modifier
			add_country_modifier = { name = dom_pedro_ii duration = -1 }

			## Prime Ministers ##
			remove_country_modifier = national_confusion
			remove_country_modifier = expert_diplomat
			remove_country_modifier = successful_industrialist
			remove_country_modifier = ivory_tower_intellectual
			remove_country_modifier = man_of_the_people
			remove_country_modifier = landed_gentleman
			remove_country_modifier = military_man
			remove_country_modifier = lord_admiral
			remove_country_modifier = raving_loon
			remove_country_modifier = luddite
			remove_country_modifier = great_statesman
			remove_country_modifier = backroom_boy
			remove_country_modifier = great_reformer
			remove_country_modifier = gauche_buffoon
			remove_country_modifier = administrative_genius
			remove_country_modifier = visionary_thinker
			remove_country_modifier = competent_placeholder
			remove_country_modifier = imperious_autocrat
			remove_country_modifier = prince_of_terror
			remove_country_modifier = efficient_sociopath
			remove_country_modifier = pig_headed_isolationist
			remove_country_modifier = ambitious_union_boss
			remove_country_modifier = dour_economist
			remove_country_modifier = has_political_leader
		}
	}

	#Remove the regency at 14yo if he was crowned too young
	country_event = {
		id = 8007
		title = "EVTNAME8007"
		desc = "EVTDESC8007"
		picture = "teen_dom_pedro"

		trigger = { tag = BRZ 
					has_country_modifier = regency_modifier
					has_country_flag = child_emperor
					year = 1840
		}

		mean_time_to_happen = { days = 1 }

		fire_only_once = yes

		option = {
			name = "EVTOPTA8003"
			any_pop = { militancy = -1 consciousness = 1 }
			plurality = 1
			remove_country_modifier = regency_modifier
			clr_global_flag = majority_coup_ongoing
			clr_global_flag = majority_coup_ongoing2
			add_country_modifier = { name = dom_pedro_ii duration = -1 }

			remove_country_modifier = national_confusion
			remove_country_modifier = expert_diplomat
			remove_country_modifier = successful_industrialist
			remove_country_modifier = ivory_tower_intellectual
			remove_country_modifier = man_of_the_people
			remove_country_modifier = landed_gentleman
			remove_country_modifier = military_man
			remove_country_modifier = lord_admiral
			remove_country_modifier = raving_loon
			remove_country_modifier = luddite
			remove_country_modifier = great_statesman
			remove_country_modifier = backroom_boy
			remove_country_modifier = great_reformer
			remove_country_modifier = gauche_buffoon
			remove_country_modifier = administrative_genius
			remove_country_modifier = visionary_thinker
			remove_country_modifier = competent_placeholder
			remove_country_modifier = imperious_autocrat
			remove_country_modifier = prince_of_terror
			remove_country_modifier = efficient_sociopath
			remove_country_modifier = pig_headed_isolationist
			remove_country_modifier = ambitious_union_boss
			remove_country_modifier = dour_economist
			remove_country_modifier = has_political_leader
		}
	}

	#Gives a small buff if the player picked child pedro but actually played well
	country_event = {
		id = 8008
		title = "EVTNAME8008"
		desc = "EVTDESC8008"
		picture = "dom_pedro_ages"

		trigger = { year = 1844
					NOT = { year = 1845 month = 2 militancy = 2 }
					has_country_flag = child_emperor
		}

		fire_only_once = yes

		option = {
			name = "EVTOPTA8003"
			add_country_modifier = { name = "child_emperor" duration = -1 }
		}

	}

	#Early Republican Coup
	country_event = {
		id = 8009
		title = "EVTNAME8009"
		desc = "EVTDESC8009"
		picture = "regencia"

		trigger = { tag = BRZ
					ai = yes
					NOT = { year = 1834 }
		}

		mean_time_to_happen = { years = 1 }

		fire_only_once = yes

		option = {
			name = "EVTOPTA8009"
			remove_country_modifier = dom_pedro_ii
			remove_country_modifier = regency_modifier
			government = democracy
			add_country_modifier = { name = small_immigration_boom_country duration = 365 }
			add_country_modifier = { name = republican_winds duration = 3650 }
			
			any_pop = { ideology = { factor = 0.02 value = liberal } }
			any_pop = { limit = { pop_majority_ideology = conservative } militancy = 3 }
			any_pop = { limit = { pop_majority_ideology = reactionary } militancy = 6 }
			any_pop = { limit = { pop_majority_ideology = liberal } militancy = -3 }
			## Government Flags ##
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			clr_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			set_country_flag = democracy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = anarcho_liberal_gov

			ai_chance = { factor = 10 }
		}

		option = {
			name = "EVTOPTB8009"
		}
	}

## Dom Pedro Misc Flavor

	#Dom Pedro II Weds, original VIP event by Pimparel
	country_event = { 
		id = 8010
		title = "EVTNAME8010"
		desc = "EVTDESC8010"
		picture = "DPII"
		fire_only_once = yes

		trigger = {
			has_country_flag = monarchy_gov
			SIC = {
				exists = yes
				has_country_flag = monarchy_gov
			}
			year = 1840
		}

		mean_time_to_happen = { months = 12 }

		option = {
			name = "EVTOPTA8010"
			prestige = 10
			relation = { who = SIC value = 75 }
			any_pop = { militancy = -1 }
		}
	}

	#Death of Dom Pedro II - remain a monarchy or become a democracy
	country_event = {
		id = 8011
		title = "EVTNAME8011"
		desc = "EVTDESC8011"
		picture = "BRZ_pedro_death"

		trigger = {
			has_country_modifier = dom_pedro_ii
			year = 1880
			has_country_flag = monarchy_gov
		}

		mean_time_to_happen = { years = 20
								modifier = { factor = 0.5 year = 1890 }
								modifier = { factor = 0.5 year = 1895 }
								modifier = { factor = 0.5 year = 1900 }
								modifier = { factor = 0.2 year = 1905 }
								modifier = { factor = 0.1 year = 1910 }
		}

		fire_only_once = yes

		immediate = { remove_country_modifier = dom_pedro_ii }

		# He will be missed.
		option = {
			name = "EVTOPTA8011"
			prestige = 10
			plurality = -1
			add_country_modifier = { name = national_instability duration = 365 }
			aristocrats = {
				militancy = 3
				consciousness = 3
			}

			ai_chance = {
				factor = 50
				modifier = {
					factor = 0
					part_of_sphere = yes
					sphere_owner = { has_country_flag = democracy_gov }
				}
			}
		}

		# Abolish Monarchy
		option = {
			name = "EVTOPT8011"
			prestige = -20
			plurality = -10
			government = democracy
			ruling_party_ideology = liberal
			add_country_modifier = { name = small_immigration_boom_country duration = 365 }
			## Government Flags ##
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			clr_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			set_country_flag = democracy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = anarcho_liberal_gov

			ai_chance = { factor = 50
				modifier = { factor = 0 is_greater_power = yes }
			}
		}
	}

	#A Retired Emperor - Sanity check event to remove the Dom Pedro II modifier if Brazil is not a monarchy.
	country_event = {

		id = 8012
		title = "EVTNAME8012"
		desc = "EVTDESC8012"
		picture = "DPII"

		trigger = {
			has_country_modifier = dom_pedro_ii
			NOT = {
				has_country_flag = monarchy_gov
			}
		}

		mean_time_to_happen = { days = 7 }

		fire_only_once = yes

		option = {
			name = "EVTOPTA8012"
			remove_country_modifier = dom_pedro_ii
		}
	}

#Revolução Farroupilha 

	# Custom Civil War System
	country_event = {
		id = 8100
		title = "EVTNAME8100"
		desc = "EVTDESC8100"
		picture = "batalha_farroupilha"

		trigger = {
			has_global_flag = farroupilha_ongoing
			tag = BRZ
			war_with = RGS
			RGS = { any_owned_province = { NOT = { province_id = 2461 } controlled_by = THIS province_control_days = 90 } }
		}

		allow_multiple_instances = no

		option = {
			name = "EVTOPTA8100"
			plurality = 0.1
			RGS = { any_owned = { limit = { NOT = { province_id = 2461 } controlled_by = THIS province_control_days = 90 }
								  secede_province = THIS
				 	}
			}
		}
	}
	
	#Reverse Flip
	country_event = {
		id = 8101
		title = "EVTNAME8101"
		desc = "EVTDESC8101"
		picture = "farrapos_charge"

		trigger = {
			has_global_flag = farroupilha_ongoing
			tag = BRZ
			war_with = RGS
			any_owned_province = { controlled_by = RGS is_core = RGS province_control_days = 90 }
		}

		allow_multiple_instances = no

		option = {
			name = "EVTOPTA8101"
			any_owned = { limit = { controlled_by = RGS  is_core = RGS province_control_days = 90 }
									plurality = -0.1
								    secede_province = RGS
			}
		}
	}

	#Tomada da Laguna, Juliana Republic 
	country_event = {
		id = 8102
		title = "EVTNAME8102"
		desc = "EVTDESC8102"
		picture = "tomada_da_laguna"

		trigger = {
			has_global_flag = farroupilha_ongoing
			tag = RGS
			war_with = BRZ
			2461 = { controlled_by = THIS province_control_days = 90 }
		}

		allow_multiple_instances = no

		option = {
			name = "EVTOPTA8102"
			2461 = { secede_province = RJL }
			create_alliance = RJL
			BRZ = { country_event = 8103 }
		}

		option = {
			name = "EVTOPTB8102"
			plurality = -0.1
			2461 = { secede_province = THIS }
		}
	}

	#Tomada da Laguna, Juliana Republic 
	country_event = {
		id = 8103
		title = "EVTNAME8103"
		desc = "EVTDESC8103"
		picture = "tomada_da_laguna"

		is_triggered_only = yes

		option = {
			name = "EVTOPTA8103"
			war = { target = RJL 
					attacker_goal = { casus_belli = conquest }
					defender_goal = { casus_belli = status_quo }
					call_ally = no
			}
			plurality = -0.5
		}
	}

	# Queda da Laguna
	country_event = {
		id = 8104
		title = "EVTNAME8104"
		desc = "EVTDESC8104"
		picture = "queda_da_laguna"

		trigger = {
			has_global_flag = farroupilha_ongoing
			tag = BRZ
			OR = { war_with = RGS 
				   war_with = RJL }
			2461 = { OR = { owned_by = RGS owned_by = RJL } controlled_by = THIS province_control_days = 90 }
		}

		allow_multiple_instances = no

		option = {
			name = "EVTOPTA8104"
			plurality = 0.5
			2461 = { secede_province = THIS }
		}
	}

## Cabanos

	# Custom Civil War System
	country_event = {
		id = 8150
		title = "EVTNAME8150"
		desc = "EVTDESC8150"
		picture = ""

		trigger = {
			#has_global_flag = cabanagem_ongoing
			tag = BRZ
			war_with = GPR
			GPR = { any_owned_province = { controlled_by = THIS province_control_days = 90 } }
		}

		allow_multiple_instances = no

		option = {
			name = "EVTOPTA8100"
			GPR = { any_owned = { limit = { controlled_by = THIS province_control_days = 90 } 
								  secede_province = THIS
								  THIS = { plurality = 0.1 }
				 	}
			}
		}
	}

	# Reverse Flip
	country_event = {
		id = 8151
		title = "EVTNAME8151"
		desc = "EVTDESC8151"
		picture = ""

		trigger = {
			#has_global_flag = cabanagem_ongoing
			tag = BRZ
			war_with = GPR
			any_owned_province = { controlled_by = GPR is_core = GPR province_control_days = 90 any_neighbor_province = { owned_by = GPR } }
		}

		mean_time_to_happen = { days = 90 }

		allow_multiple_instances = no

		option = {
			name = "EVTOPTA8100"
			random_owned = { limit = { controlled_by = GPR is_core = GPR province_control_days = 80 any_neighbor_province = { owned_by = GPR } } 
								  secede_province = GPR
								  THIS = { plurality = -0.1 }
				 	}
			}
	}
	


